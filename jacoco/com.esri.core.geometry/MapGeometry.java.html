<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapGeometry.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Esri Geometry API for Java</a> &gt; <a href="index.source.html" class="el_package">com.esri.core.geometry</a> &gt; <span class="el_source">MapGeometry.java</span></div><h1>MapGeometry.java</h1><pre class="source lang-java linenums">/*
 Copyright 1995-2018 Esri

   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts Dept
 380 New York Street
 Redlands, California, USA 92373

 email: contracts@esri.com
 */


package com.esri.core.geometry;

import static com.esri.core.geometry.SizeOf.SIZE_OF_MAPGEOMETRY;

import java.io.Serializable;

/**
 * The MapGeometry class bundles the geometry with its spatial reference
 * together. To work with a geometry object in a map it is necessary to have a
 * spatial reference defined for this geometry.
 */
public class MapGeometry implements Serializable {
	private static final long serialVersionUID = 1L;

<span class="fc" id="L40">	Geometry m_geometry = null;</span>
<span class="fc" id="L41">	SpatialReference sr = null;</span>

	/**
	 * Construct a MapGeometry instance using the specified geometry instance
	 * and its corresponding spatial reference.
	 * 
	 * @param g
	 *            The geometry to construct the new MapGeometry object.
	 * @param _sr
	 *            The spatial reference of the geometry.
	 */
<span class="fc" id="L52">	public MapGeometry(Geometry g, SpatialReference _sr) {</span>
<span class="fc" id="L53">		m_geometry = g;</span>
<span class="fc" id="L54">		sr = _sr;</span>
<span class="fc" id="L55">	}</span>

	/**
	 * Gets the only geometry without the spatial reference from the
	 * MapGeometry.
	 */
	public Geometry getGeometry() {
<span class="fc" id="L62">		return m_geometry;</span>
	}

	/**
	 * Sets the geometry for this MapGeometry.
	 * 
	 * @param geometry
	 *            The geometry.
	 */

	public void setGeometry(Geometry geometry) {
<span class="nc" id="L73">		this.m_geometry = geometry;</span>
<span class="nc" id="L74">	}</span>

	/**
	 * Sets the spatial reference for this MapGeometry.
	 * 
	 * @param sr
	 *            The spatial reference.
	 */
	public void setSpatialReference(SpatialReference sr) {
<span class="fc" id="L83">		this.sr = sr;</span>
<span class="fc" id="L84">	}</span>

	/**
	 * Gets the spatial reference for this MapGeometry.
	 */
	public SpatialReference getSpatialReference() {
<span class="fc" id="L90">		return sr;</span>
	}

	/**
	 * The output of this method can be only used for debugging. It is subject to change without notice. 
	 */
	@Override
	public String toString() {
<span class="nc" id="L98">		String snippet = OperatorExportToJson.local().execute(getSpatialReference(), getGeometry());</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">		if (snippet.length() &gt; 200) { </span>
<span class="nc" id="L100">			return snippet.substring(0, 197) + &quot;... (&quot;+snippet.length()+&quot; characters)&quot;; </span>
		}
		else {
<span class="nc" id="L103">			return snippet;</span>
		}
	}
	
	@Override
	public boolean equals(Object other) {
<span class="pc bpc" id="L109" title="1 of 2 branches missed.">		if (other == null)</span>
<span class="nc" id="L110">			return false;</span>

<span class="pc bpc" id="L112" title="1 of 2 branches missed.">		if (other == this)</span>
<span class="nc" id="L113">			return true;</span>

<span class="pc bpc" id="L115" title="1 of 2 branches missed.">		if (other.getClass() != getClass())</span>
<span class="nc" id="L116">			return false;</span>

<span class="fc" id="L118">		MapGeometry omg = (MapGeometry)other;</span>
<span class="fc" id="L119">		SpatialReference sr = getSpatialReference();</span>
<span class="fc" id="L120">		Geometry g = getGeometry();</span>
<span class="fc" id="L121">		SpatialReference osr = omg.getSpatialReference();</span>
<span class="fc" id="L122">		Geometry og = omg.getGeometry();</span>
		
<span class="pc bpc" id="L124" title="1 of 2 branches missed.">		if (sr != osr) {</span>
<span class="pc bpc" id="L125" title="2 of 4 branches missed.">			if (sr == null || !sr.equals(osr))</span>
<span class="fc" id="L126">				return false;</span>
		}

<span class="nc bnc" id="L129" title="All 2 branches missed.">		if (g != og) {</span>
<span class="nc bnc" id="L130" title="All 4 branches missed.">			if (g == null || !g.equals(og))</span>
<span class="nc" id="L131">				return false;</span>
		}
		
<span class="nc" id="L134">		return true;</span>
	}

	/**
	 * Returns an estimate of this object size in bytes.
	 * &lt;p&gt;
	 * This estimate doesn't include the size of the {@link SpatialReference} object
	 * because instances of {@link SpatialReference} are expected to be shared among
	 * geometry objects.
	 *
	 * @return Returns an estimate of this object size in bytes.
	 */
	public long estimateMemorySize() {
<span class="nc" id="L147">		long sz = SIZE_OF_MAPGEOMETRY;</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">		if (m_geometry != null)</span>
<span class="nc" id="L149">			sz += m_geometry.estimateMemorySize();</span>
<span class="nc" id="L150">		return sz;</span>
	}
	
	@Override
	public int hashCode() {
<span class="nc" id="L155">		SpatialReference sr = getSpatialReference();</span>
<span class="nc" id="L156">		Geometry g = getGeometry();</span>
<span class="nc" id="L157">		int hc = 0x2937912;</span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">		if (sr != null)</span>
<span class="nc" id="L159">			hc ^= sr.hashCode();</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">		if (g != null)</span>
<span class="nc" id="L161">			hc ^= g.hashCode();</span>
		
<span class="nc" id="L163">		return hc;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>